<div class="row">
  <div class="col-12">
    <div class="card">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h3 class="card-title">📂 Tải Schema MySQL</h3>
        <form action="/admin/schema/upload" method="POST" enctype="multipart/form-data" class="mb-4">
          <div class="form-group mb-2">
            <input type="file" name="schemaFile" accept=".sql,.txt" class="form-control" required>
          </div>
          <button class="btn btn-primary" type="submit">Tải Schema</button>
        </form>

      </div>
      <div class="card-body">
        <p>File schema hiện tại </p>
        <a class="btn btn-info" href="/admin/schema/view" target="_blank">📄 Xem nội dung</a>
        <a class="btn btn-danger" href="/admin/schema/destroy" onclick="return confirm('Bạn chắc chắn muốn xóa schema hiện tại?')">🗑️ Xóa</a>
      </div>
      <hr>
      <h5>🚀 Seed Files</h5>
      <br>
      <ul>
        <li>
          .chroma_product_seeded
          <a class="btn btn-danger btn-sm" href="/admin/schema/destroy-seed?file=.chroma_product_seeded" onclick="return confirm('Xóa .chroma_product_seeded ?')">🗑️ Xóa</a>
        </li>
        <br>
        <li>
          .chroma_seeded
          <a class="btn btn-danger btn-sm" href="/admin/schema/destroy-seed?file=.chroma_seeded" onclick="return confirm('Xóa .chroma_seeded ?')">🗑️ Xóa</a>
        </li>
      </ul>

      <hr>
      <h5>📦 Collections trong Chroma</h5>

      <form action="/admin/schema/create-collection" method="POST" class="form-inline mb-3">
        <input type="text" name="name" placeholder="Tên collection mới" class="form-control mr-2" required>
        <button type="submit" class="btn btn-success">➕ Tạo Collection</button>
      </form>

      <% if (collections && collections.length > 0) { %>
      <table class="table table-dark table-bordered table-hover">
        <thead>
          <tr>
            <th style="width:70%">Tên Collection</th>
            <th style="width:30%">Hành động</th>
          </tr>
        </thead>
        <tbody>
          <% collections.forEach(function(col) { %>
          <tr>
            <td><%= col %></td>
            <td>
              <% if (col === "product_descriptions") { %>
              <!-- Direct seed -->
              <a class="btn btn-success btn-sm" href="/admin/schema/seed-collection?name=<%= col %>" onclick="return confirm('Seed collection <%= col %>?')">
                🌱 Seed
              </a>
              <% } else { %>
              <!-- Upload file before seeding -->
              <form action="/admin/schema/seed-custom?name=<%= col %>" method="POST" enctype="multipart/form-data" style="display:inline-block">
                <input type="file" name="seedFile" class="form-control form-control-sm mb-1" required>
                <button class="btn btn-success btn-sm" type="submit" onclick="return confirm('Seed collection <%= col %> với file này?')">
                  🌱 Seed
                </button>
              </form>
              <% } %>
              <a class="btn btn-info btn-sm" href="/admin/schema/view-collection?name=<%= col %>" target="_blank">
                👁️ Xem
              </a>
              <a class="btn btn-danger btn-sm" href="/admin/schema/delete-collection?name=<%= col %>" onclick="return confirm('Xóa collection <%= col %>?')">
                🗑️ Xóa
              </a>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>

      <% } else { %>
      <p>⚠️ Không có collection nào</p>
      <% } %>
    </div>
  </div>
</div>
</div>